# test-shortener-koa

[TEST] Link Shortener with minimum required functionality and maximum performance

## Task 1

Реализовать сервис для сокращения ссылок (ex. bit.ly, goo.gl). При первом создании ссылки пользователю выдается уникальный userid, который сохраняется для каждой ссылки. На вход подается длинная ссылка, на выход - ее сокращенная версия:
http://google.com​-> ​http://localhost/2IuUIvV
При переходе по сокращенной ссылке пользователь перенаправляется на
оригинальную ссылку, для каждой ссылки сохраняется количество переходов. Технические требования
Backend:​Node.js, JS|| TS, Redis || MongoDB, Express.js, любые библиотеки из npm, unit tests Frontend:​любой фреймворк (react.js, vue) || plain html + js || console ui (cli)

## Комментарии

Stack: Node.js + Koa.js + Redis
(Jest / supertest / ioredis-mock для тестов)

Нет фронтеда (но в JSDoc к каждому ендпоинту есть пример его вызова `curl`, так что можно сказать что CLI), вместо него написаны интеграционный тесты со 100% покрытием кода - `npm test`

Koa вместо Express так он меньше, быстрее, лучше работает с async-обработчиками и полностью подходит для задачи.

Не совсем понимаю, что надо делать с userid, поэтому реализовал update token вместо него, который можно использовать для удаления ссылки или ее модификации (см. обработчики методов [`DELETE`](server.js#L146) и [`PATCH`](server.js#L168)).

Бонусом сделал возможность создавать expiring ссылки.

Для тестов реальный Redis сервер не нужен (используется `ioredis-mock`, но если нужно попробовать с реальным сервером, то надо поменять одну строку вверху файла [`index.js`](index.js#L3))

Запустить сервер: `npm start`
Тесты (с coverage): `npm test`
